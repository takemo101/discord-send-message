# Discordにログインしてメッセージを残すツール（笑）
私が関わる業務では、メッセージツールにDiscordをよく利用します。  
メッセージのやり取りでは、始業or就業の挨拶をするのですが、挨拶を自動化できるかな？と思いchromedpを利用して試してみました。  
私の手元環境はMacなので、他のOSでは動かないかもしれないので、その辺はご注意ください。

## 内容
chromedpというChromeを操作するパッケージを利用して、DiscordのWebサイトにログインして、対象のチャンネルにメッセージを残すことができるツールです。  
しょうもないツールなので、遊び程度にいじってもらえればと思います（笑）

## makeコマンドについて
makeコマンドに必要な操作をまとめています。  
以下の順番でコマンドを実行してください。

#### 1. setup
以下コマンドで、必要なディレクトリとファイルを作成します。  
実行するとconfig.yamlファイルが生成されるので、Discordのアカウント設定などをしてください。
```
make setup
```

#### 2. build
実行ファイルをビルドします（for Mac）  
実行するとappファイルが作成されます。
```
make build
```

## config.yamlについて
``` make setup ``` で作成されたconfig.yamlファイルには、ログインするDisocrdのアカウント情報や、メッセージ送信のデフォルト設定を行います。

```yaml
# ログインするDiscordアカウント設定
account:
  email: 'アカウントメールアドレス'
  password: 'アカウントパスワード'

# メッセージ送信の対象となるサーバーやチャンネルなどのデフォルト設定
default:
  server: 'メッセージ送信対象のサーバー名'
  channel: 'serverで指定したサーバーにある送信対象のチャンネル名'
  message: 'デフォルトメッセージ'

```

## ビルドファイルの実行方法について
``` make build ``` で作成されたappを実行することで、config.yamlに設定したアカウントでメッセージを自動的に送信します。  
appを実行する際には、オプションで送信対象チャンネルやメッセージ内容を指定できます。

```
./app -message="メッセージ内容" -server="対象サーバー名" -channel="対象チャンネル名"
```
> *注釈！ オプション設定しないければ、config.yamlのデフォルト設定が適用されます*

## 注意
DiscordのWebアプリのレイアウトなどに変更があれば使えなくなりますので、その辺注意してください。  
あと大事なことですが、Webサイトの負荷になるような使い方はしないでください。
